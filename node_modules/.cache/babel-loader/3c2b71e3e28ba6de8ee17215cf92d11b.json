{"ast":null,"code":"import _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/contexts/AuthStore.js\";\nimport React, { Component } from 'react';\nvar CURRENT_USER_KEY = 'current-user';\nvar AuthContext = React.createContext();\n\nvar AuthStore =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AuthStore, _Component);\n\n  function AuthStore() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AuthStore);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuthStore)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: JSON.parse(localStorage.getItem(CURRENT_USER_KEY) || '{}'),\n      classroom: '{}'\n    };\n\n    _this.handleUserChange = function (user) {\n      _this.setState({\n        user: user\n      });\n\n      if (user && user.email) {\n        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\n      } else {\n        localStorage.removeItem(CURRENT_USER_KEY);\n      }\n    };\n\n    _this.handleClassroomChange = function (classroom) {\n      _this.setState({\n        classroom: classroom\n      });\n\n      if (user && user.email) {\n        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\n      } else {\n        localStorage.removeItem(CURRENT_USER_KEY);\n      }\n    };\n\n    _this.isAuthenticated = function () {\n      return _this.state.user && _this.state.user.email;\n    };\n\n    _this.isAdmin = function () {\n      return _this.state.user && _this.state.user.role === 'teacher';\n    };\n\n    return _this;\n  }\n\n  _createClass(AuthStore, [{\n    key: \"render\",\n    //cambiar por teacher\n    value: function render() {\n      return React.createElement(AuthContext.Provider, {\n        value: {\n          user: this.state.user,\n          onUserChanged: this.handleUserChange,\n          isAuthenticated: this.isAuthenticated,\n          isAdmin: this.isAdmin\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AuthStore;\n}(Component);\n\nvar withAuthConsumer = function withAuthConsumer(Component) {\n  return function (props) {\n    return React.createElement(AuthContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, function (storeProps) {\n      return React.createElement(Component, Object.assign({}, props, storeProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }));\n    });\n  };\n};\n\nexport { withAuthConsumer, AuthStore, AuthContext };","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/contexts/AuthStore.js"],"names":["React","Component","CURRENT_USER_KEY","AuthContext","createContext","AuthStore","state","user","JSON","parse","localStorage","getItem","classroom","handleUserChange","setState","email","setItem","stringify","removeItem","handleClassroomChange","isAuthenticated","isAdmin","role","onUserChanged","props","children","withAuthConsumer","storeProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,IAAMC,gBAAgB,GAAG,cAAzB;AACA,IAAMC,WAAW,GAAGH,KAAK,CAACI,aAAN,EAApB;;IAEMC,S;;;;;;;;;;;;;;;;;UAEJC,K,GAAQ;AACNC,MAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBT,gBAArB,KAA0C,IAArD,CADA;AAENU,MAAAA,SAAS,EAAE;AAFL,K;;UAKRC,gB,GAAmB,UAACN,IAAD,EAAU;AAC3B,YAAKO,QAAL,CAAc;AACZP,QAAAA,IAAI,EAAEA;AADM,OAAd;;AAIA,UAAGA,IAAI,IAAIA,IAAI,CAACQ,KAAhB,EAAsB;AACpBL,QAAAA,YAAY,CAACM,OAAb,CAAqBd,gBAArB,EAAuCM,IAAI,CAACS,SAAL,CAAeV,IAAf,CAAvC;AACD,OAFD,MAEO;AACLG,QAAAA,YAAY,CAACQ,UAAb,CAAwBhB,gBAAxB;AACD;AACF,K;;UAEDiB,qB,GAAwB,UAACP,SAAD,EAAe;AACrC,YAAKE,QAAL,CAAc;AAAEF,QAAAA,SAAS,EAAEA;AAAb,OAAd;;AAEA,UAAGL,IAAI,IAAIA,IAAI,CAACQ,KAAhB,EAAsB;AACpBL,QAAAA,YAAY,CAACM,OAAb,CAAqBd,gBAArB,EAAuCM,IAAI,CAACS,SAAL,CAAeV,IAAf,CAAvC;AACD,OAFD,MAEO;AACLG,QAAAA,YAAY,CAACQ,UAAb,CAAwBhB,gBAAxB;AACD;AACF,K;;UAEDkB,e,GAAkB;AAAA,aAAM,MAAKd,KAAL,CAAWC,IAAX,IAAmB,MAAKD,KAAL,CAAWC,IAAX,CAAgBQ,KAAzC;AAAA,K;;UAClBM,O,GAAU;AAAA,aAAM,MAAKf,KAAL,CAAWC,IAAX,IAAmB,MAAKD,KAAL,CAAWC,IAAX,CAAgBe,IAAhB,KAAyB,SAAlD;AAAA,K;;;;;;;AAA6D;6BAE/D;AACN,aACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,QAAA,KAAK,EAAG;AAC5Bf,UAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IADW;AAE5BgB,UAAAA,aAAa,EAAE,KAAKV,gBAFQ;AAG5BO,UAAAA,eAAe,EAAE,KAAKA,eAHM;AAI5BC,UAAAA,OAAO,EAAE,KAAKA;AAJc,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG,KAAKG,KAAL,CAAWC,QANd,CADF;AAUD;;;;EA3CqBxB,S;;AA+CxB,IAAMyB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACzB,SAAD,EAAe;AACtC,SAAM,UAACuB,KAAD;AAAA,WACJ,oBAAC,WAAD,CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,UAACG,UAAD;AAAA,aAAgB,oBAAC,SAAD,oBAAeH,KAAf,EAA0BG,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAhB;AAAA,KADH,CADI;AAAA,GAAN;AAKD,CAND;;AAQA,SAASD,gBAAT,EAA2BrB,SAA3B,EAAsCF,WAAtC","sourcesContent":["import React, { Component } from 'react';\n\nconst CURRENT_USER_KEY = 'current-user';\nconst AuthContext = React.createContext();\n\nclass AuthStore extends Component {\n\n  state = {\n    user: JSON.parse(localStorage.getItem(CURRENT_USER_KEY) || '{}'),\n    classroom: '{}'\n  }\n\n  handleUserChange = (user) => {\n    this.setState({\n      user: user\n    });\n\n    if(user && user.email){\n      localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user))\n    } else {\n      localStorage.removeItem(CURRENT_USER_KEY)\n    }\n  }\n\n  handleClassroomChange = (classroom) => {\n    this.setState({ classroom: classroom});\n\n    if(user && user.email){\n      localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user))\n    } else {\n      localStorage.removeItem(CURRENT_USER_KEY)\n    }\n  }\n\n  isAuthenticated = () => this.state.user && this.state.user.email;\n  isAdmin = () => this.state.user && this.state.user.role === 'teacher'; //cambiar por teacher\n\n  render(){\n    return(\n      <AuthContext.Provider value= {{\n        user: this.state.user,\n        onUserChanged: this.handleUserChange,\n        isAuthenticated: this.isAuthenticated,\n        isAdmin: this.isAdmin\n      }}>\n        {this.props.children}\n      </AuthContext.Provider>\n    )\n  }\n}\n\n\nconst withAuthConsumer = (Component) => {\n  return(props) => (\n    <AuthContext.Consumer>\n      {(storeProps) => <Component {...props} {...storeProps}/>}\n    </AuthContext.Consumer>\n  )\n}\n\nexport { withAuthConsumer, AuthStore, AuthContext}"]},"metadata":{},"sourceType":"module"}