{"ast":null,"code":"import _defineProperty from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _readOnlyError from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\nimport _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/CheckList.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal, Form } from 'react-bootstrap';\nimport classroomService from '../../services/classroom-service';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\n\nvar CheckList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CheckList, _Component);\n\n  function CheckList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CheckList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CheckList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      show: false,\n      checklist: {\n        observations: '',\n        assistants: [],\n        teacher: '',\n        classroom: '',\n        date: ''\n      }\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.handleShow = function () {\n      var studentsSelected = _this.props.studentSelected.map(function (student) {\n        return student.id;\n      });\n\n      var allStudents = _this.props.classroom.students.map(function (student) {\n        return student.id;\n      });\n\n      var assistants = allStudents.filter(function (student) {\n        var ok = true;\n\n        for (var i = 0; i < followings.length && ok; i++) {\n          // Corta cuando no hay mas following o cuando ya se encontró uno\n          var following = followings[i];\n          if (following['id'] == friend['id']) ok = (_readOnlyError(\"ok\"), false);\n        }\n\n        return ok;\n      }); // console.log(allStudents)\n      // console.log(studentsSelected)\n\n      console.log(assistants);\n\n      _this.setState({\n        show: true,\n        checklist: {\n          assistants: _this.props.studentSelected.map(function (student) {\n            return student.id;\n          }),\n          teacher: _this.props.user.id,\n          classroom: _this.props.classroom.id,\n          date: new Date().toDateString()\n        }\n      });\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState({\n        checklist: _objectSpread({}, _this.state.checklist, _defineProperty({}, name, value))\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      var checklistData = _objectSpread({}, _this.state.checklist);\n\n      classroomService.createChecklist(checklistData).then(_this.setState({\n        show: false\n      })).then(_this.props.deselectAll).then(_this.props.updateStudents);\n    };\n\n    return _this;\n  }\n\n  _createClass(CheckList, [{\n    key: \"render\",\n    value: function render(props) {\n      return React.createElement(React.Fragment, null, React.createElement(Button, {\n        variant: \"outline-secondary rounded-pill\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Check list\"), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        className: \"d-flex flex-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Check list today\", React.createElement(\"small\", {\n        className: \"text-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, this.state.checklist.date))), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"text-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Students in classroom\"), React.createElement(\"h1\", {\n        className: \"list-total\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.props.totalStudent), React.createElement(\"h1\", {\n        className: \"list-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, this.props.studentSelected.length)), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"observationsText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Observations\"), React.createElement(\"textarea\", {\n        className: \"form-control\",\n        id: \"observationsText\",\n        rows: \"3\",\n        name: \"observations\",\n        value: this.state.checklist.observations,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Save Checklist\"))));\n    }\n  }]);\n\n  return CheckList;\n}(Component);\n\nexport default withAuthConsumer(CheckList);","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/CheckList.js"],"names":["React","Component","Button","Modal","Form","classroomService","withAuthConsumer","CheckList","state","show","checklist","observations","assistants","teacher","classroom","date","handleClose","setState","handleShow","studentsSelected","props","studentSelected","map","student","id","allStudents","students","filter","ok","i","followings","length","following","friend","console","log","user","Date","toDateString","handleChange","event","target","name","value","handleSubmit","preventDefault","checklistData","createChecklist","then","deselectAll","updateStudents","totalStudent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Modal, Form } from 'react-bootstrap';\nimport classroomService from '../../services/classroom-service';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\n\n\nclass CheckList extends Component {\n    state = {\n      show: false,\n      checklist: {\n        observations: '',\n        assistants: [],\n        teacher:'',\n        classroom: '',\n        date:''\n      }\n    }\n\n    handleClose = () => {\n        this.setState({ show: false })\n      }\n    \n    handleShow = () => {\n      const studentsSelected = this.props.studentSelected.map(student => student.id);\n      const allStudents = this.props.classroom.students.map(student => student.id);\n      const assistants = allStudents.filter((student) => {\n       \n          const ok = true;\n          for (let i = 0; i < followings.length && ok; i++) { // Corta cuando no hay mas following o cuando ya se encontró uno\n            let following = followings[i];\n            if (following['id'] == friend['id'])\n              ok = false;\n          }\n          return ok;\n      \n      })\n      // console.log(allStudents)\n      // console.log(studentsSelected)\n      console.log(assistants)\n\n        this.setState({ \n          show: true,\n          checklist: {\n            assistants: this.props.studentSelected.map(student => student.id),\n            teacher: this.props.user.id,\n            classroom: this.props.classroom.id,\n            date: new Date().toDateString()\n          } \n        })\n    }\n\n  \n\n    handleChange = (event) => {\n      const { name, value } = event.target;\n  \n      this.setState({ \n        checklist: {\n          ...this.state.checklist,\n          [name]: value\n        }\n      })\n    }\n\n    handleSubmit = (event) => {\n      event.preventDefault();\n    \n      const checklistData = { ...this.state.checklist }\n      \n      classroomService.createChecklist(checklistData)\n        .then(this.setState({ show: false }))\n        .then(this.props.deselectAll)\n        .then(this.props.updateStudents)\n    }\n    \n\n    render(props) {\n        return (\n            <>\n                <Button variant=\"outline-secondary rounded-pill\"  onClick={this.handleShow}>\n                    Check list\n                </Button>\n\n                <Modal show={this.state.show} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title className=\"d-flex flex-column\">Check list today \n                        <small className=\"text-secondary\">{this.state.checklist.date}</small>\n                        </Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                      <div className=\"list-info\">\n                        <p className=\"text-info\">Students in classroom</p>\n                        <h1 className=\"list-total\">{this.props.totalStudent}</h1>\n                        <h1 className=\"list-num\">{this.props.studentSelected.length}</h1>   \n                      </div>\n                      <Form>\n                        <label htmlFor=\"observationsText\">Observations</label>\n                        <textarea className=\"form-control\" \n                          id=\"observationsText\" \n                          rows=\"3\" \n                          name=\"observations\"\n                          value={this.state.checklist.observations} \n                          onChange={this.handleChange}\n                          />\n                      </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"info\" onClick={this.handleSubmit}>\n                          Save Checklist\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </>\n        )\n    }\n\n\n}\n\nexport default withAuthConsumer(CheckList) ;"]},"metadata":{},"sourceType":"module"}