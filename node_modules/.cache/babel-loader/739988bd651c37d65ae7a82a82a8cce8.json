{"ast":null,"code":"import _toConsumableArray from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/AddStudent.js\";\nimport React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport classroomService from '../../services/classroom-service';\nimport { Button, Modal, FormControl, InputGroup } from 'react-bootstrap'; // eslint-disable-next-line no-useless-escape\n\nvar EMAIL_PATTERN = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nvar validations = {\n  email: function email(value) {\n    var message;\n\n    if (!value) {\n      message = 'Email is required';\n    } else if (!EMAIL_PATTERN.test(value)) {\n      message = 'Invalid email pattern';\n    }\n\n    return message;\n  }\n};\n\nvar AddStudent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddStudent, _Component);\n\n  function AddStudent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddStudent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddStudent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      students: [],\n      user: {\n        email: ''\n      },\n      errors: {\n        email: validations.email()\n      },\n      touch: {}\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState({\n        user: _defineProperty({}, name, value),\n        errors: _objectSpread({}, _this.state.errors, _defineProperty({}, name, validations[name] && validations[name](value)))\n      });\n    };\n\n    _this.handleBLur = function (event) {\n      var name = event.target.name;\n\n      _this.setState(_objectSpread({}, _this.state.touch, _defineProperty({}, name, true)));\n    };\n\n    _this.getStudent = function (event) {\n      event.preventDefault();\n\n      var userDate = _objectSpread({}, _this.state.user);\n\n      classroomService.searchUserByEmail(userDate).then(function (student) {\n        return _this.setState({\n          students: [].concat(_toConsumableArray(_this.state.students), [student]),\n          user: {\n            email: ''\n          }\n        });\n      });\n    };\n\n    _this.addListStudents = function (event) {\n      event.preventDefault();\n\n      var classroomData = _objectSpread({}, _this.state.classroom);\n\n      classroomService.editClassroom(classroomData) //.then(this.props.fetchClassrooms)\n      .then(_this.setState({\n        show: false\n      }));\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AddStudent, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          students = _this$state.students,\n          user = _this$state.user;\n      return React.createElement(React.Fragment, null, React.createElement(Button, {\n        variant: \"outline-info ml-3\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"+\"), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Add News Students\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        className: \"mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        placeholder: \"Student email...\",\n        name: \"email\",\n        value: user.email,\n        onBlur: this.handleBlur,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(InputGroup.Append, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-secondary\",\n        onClick: this.getStudent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"+ Add\"))), React.createElement(\"ol\", {\n        rece: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, students.map(function (student) {\n        return React.createElement(\"li\", {\n          key: student.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, student.name, \" \", student.surname, \" - \", student.email);\n      }))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        onSubmit: this.addListStudents,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Save students\"))));\n    }\n  }]);\n\n  return AddStudent;\n}(Component);\n\nexport default withAuthConsumer(AddStudent);","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/AddStudent.js"],"names":["React","Component","withAuthConsumer","classroomService","Button","Modal","FormControl","InputGroup","EMAIL_PATTERN","validations","email","value","message","test","AddStudent","state","students","user","errors","touch","handleChange","event","target","name","setState","handleBLur","getStudent","preventDefault","userDate","searchUserByEmail","then","student","addListStudents","classroomData","classroom","editClassroom","show","handleClose","handleShow","handleBlur","map","id","surname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport classroomService from '../../services/classroom-service';\nimport { Button, Modal, FormControl, InputGroup } from 'react-bootstrap';\n\n// eslint-disable-next-line no-useless-escape\nconst EMAIL_PATTERN = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nconst validations = { \n  email: (value) => {\n  let message;\n  if(!value){\n    message = 'Email is required'\n  } \n  else if(!EMAIL_PATTERN.test(value)){\n    message = 'Invalid email pattern'\n  }\n  return message;\n}}\n\nclass AddStudent extends Component {\n  state = {\n    students: [],\n    user: {\n      email:''\n    },\n    errors: {\n      email: validations.email(),\n    },\n    touch: {}\n  }\n\n  handleChange = (event) => {\n\n    const { name, value } = event.target;\n\n    this.setState({ \n      user: {\n        [name]: value\n      },\n      errors: {\n        ...this.state.errors,\n        [name]: validations[name] && validations[name](value)\n      }\n    })\n  }\n\n  handleBLur = (event) => {\n    const { name } = event.target;\n  \n    this.setState({\n      ...this.state.touch,\n      [name]: true\n    })\n  }\n\n  getStudent = (event) => {\n    event.preventDefault();\n\n    const userDate = { ...this.state.user}\n    classroomService.searchUserByEmail(userDate)\n    .then(student => this.setState({ \n        students: [\n          ...this.state.students,\n        student\n        ],\n      user: {\n        email: ''\n      }\n       \n    }))\n  }\n\n  addListStudents = (event) => {\n    event.preventDefault();\n    \n    const classroomData = {\n      ...this.state.classroom\n    }\n    classroomService.editClassroom(classroomData)\n    //.then(this.props.fetchClassrooms)\n    .then(this.setState({ show: false }))\n  }\n\n\n  handleClose = () => {\n    this.setState({ show: false });\n  }\n\n  handleShow = () => {\n    this.setState({ show: true });\n  }\n\n\n  render() {\n    const { errors, students, user } = this.state\n    \n    return(\n      <>\n        <Button variant=\"outline-info ml-3\" onClick={this.handleShow}>\n          +\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Add News Students</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <InputGroup className=\"mb-3\">\n              <FormControl\n                placeholder=\"Student email...\"\n                name=\"email\" \n                value={user.email}\n                onBlur={this.handleBlur}\n                onChange={this.handleChange}\n              />\n              \n              {/* <div className=\"invalid-feedback\">{errors.email}</div> */}\n              <InputGroup.Append>\n                <Button variant=\"outline-secondary\" onClick={this.getStudent}>+ Add</Button>\n              </InputGroup.Append>\n            </InputGroup>\n            <ol rece>\n              {students.map(student => (\n                <li key={student.id}>{student.name} {student.surname} - {student.email}</li>\n              ))}\n              \n            </ol>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"primary\" onSubmit={this.addListStudents} >\n              Save students\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    )\n  }\n}\n\nexport default withAuthConsumer(AddStudent);"]},"metadata":{},"sourceType":"module"}