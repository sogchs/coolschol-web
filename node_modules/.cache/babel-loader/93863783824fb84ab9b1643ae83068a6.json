{"ast":null,"code":"import _toConsumableArray from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/AddStudent.js\";\nimport React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport classroomService from '../../services/classroom-service';\nimport { Button, Modal, FormControl, InputGroup, Form } from 'react-bootstrap'; // eslint-disable-next-line no-useless-escape\n\nvar EMAIL_PATTERN = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nvar validations = {\n  email: function email(value) {\n    var message;\n\n    if (!value) {\n      message = 'Email is required';\n    } else if (!EMAIL_PATTERN.test(value)) {\n      message = 'Invalid email pattern';\n    }\n\n    return message;\n  }\n};\n\nvar AddStudent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddStudent, _Component);\n\n  function AddStudent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddStudent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddStudent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      students: [],\n      user: {\n        email: ''\n      },\n      errors: {\n        email: validations.email()\n      },\n      touch: {}\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState({\n        user: _defineProperty({}, name, value),\n        errors: _objectSpread({}, _this.state.errors, _defineProperty({}, name, validations[name] && validations[name](value)))\n      });\n    };\n\n    _this.handleBlur = function (event) {\n      var name = event.target.name;\n\n      _this.setState(_objectSpread({}, _this.state.touch, _defineProperty({}, name, true)));\n    };\n\n    _this.getStudent = function (event) {\n      event.preventDefault();\n\n      var userEmail = _objectSpread({}, _this.state.user);\n\n      classroomService.searchUserByEmail(userEmail).then(function (student) {\n        return _this.setState({\n          students: [].concat(_toConsumableArray(_this.state.students), [student]),\n          user: {\n            email: ''\n          }\n        });\n      });\n    };\n\n    _this.addListStudents = function (event) {\n      event.preventDefault();\n      var classroom = {\n        students: _this.state.students.map(function (student) {\n          return student.id;\n        })\n      };\n      classroomService.editClassroom(_this.props.classroom.id, classroom).then(_this.setState({\n        show: false,\n        students: []\n      })); // console.log(\"id clase en la que estoy=>\", this.props.classroom.id)\n      // console.log(\"datos que quiero guardar=>\", classroom)\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AddStudent, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          students = _this$state.students,\n          user = _this$state.user,\n          touch = _this$state.touch;\n      return React.createElement(React.Fragment, null, React.createElement(Button, {\n        variant: \"outline-info ml-3\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"+\"), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Add News Students\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        className: \"mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        className: \"form-control \".concat(touch.email && errors.email && 'is-invalid'),\n        placeholder: \"Student email...\",\n        name: \"email\",\n        value: user.email,\n        isInvalid: this.handleBlur,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(Form.Control.Feedback, {\n        type: \"invalid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, errors.email), React.createElement(InputGroup.Append, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-secondary\",\n        onClick: this.getStudent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"+ Add\"))), React.createElement(\"ol\", {\n        reversed: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, students.map(function (student) {\n        return React.createElement(\"li\", {\n          key: student.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, student.name, \" \", student.surname, \" - \", student.email);\n      }))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        onClick: this.addListStudents,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Save students\"))));\n    }\n  }]);\n\n  return AddStudent;\n}(Component);\n\nexport default withAuthConsumer(AddStudent);","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/AddStudent.js"],"names":["React","Component","withAuthConsumer","classroomService","Button","Modal","FormControl","InputGroup","Form","EMAIL_PATTERN","validations","email","value","message","test","AddStudent","state","students","user","errors","touch","handleChange","event","target","name","setState","handleBlur","getStudent","preventDefault","userEmail","searchUserByEmail","then","student","addListStudents","classroom","map","id","editClassroom","props","show","handleClose","handleShow","surname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport classroomService from '../../services/classroom-service';\nimport { Button, Modal, FormControl, InputGroup, Form } from 'react-bootstrap';\n\n// eslint-disable-next-line no-useless-escape\nconst EMAIL_PATTERN = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nconst validations = { \n  email: (value) => {\n  let message;\n  if(!value){\n    message = 'Email is required'\n  } \n  else if(!EMAIL_PATTERN.test(value)){\n    message = 'Invalid email pattern'\n  }\n  return message;\n}}\n\nclass AddStudent extends Component {\n  state = {\n    students: [],\n    user: {\n      email:''\n    },\n    errors: {\n      email: validations.email(),\n    },\n    touch: {}\n  }\n\n  handleChange = (event) => {\n\n    const { name, value } = event.target;\n\n    this.setState({ \n      user: {\n        [name]: value\n      },\n      errors: {\n        ...this.state.errors,\n        [name]: validations[name] && validations[name](value)\n      }\n    })\n  }\n\n  handleBlur = (event) => {\n    const { name } = event.target;\n  \n    this.setState({\n      ...this.state.touch,\n      [name]: true\n    })\n  }\n\n  getStudent = (event) => {\n    event.preventDefault();\n\n    const userEmail = { ...this.state.user}\n    classroomService.searchUserByEmail(userEmail)\n    .then(student => this.setState({ \n      students: [\n        ...this.state.students,\n      student\n      ],\n      user: {\n        email: ''\n      }\n    }))\n  }\n\n  addListStudents = (event) => {\n    event.preventDefault();\n\n    const classroom = {\n      students: this.state.students.map(student => student.id)\n    }\n    classroomService.editClassroom(this.props.classroom.id, classroom)\n      .then(this.setState({ show: false, students: [] }))\n    // console.log(\"id clase en la que estoy=>\", this.props.classroom.id)\n    // console.log(\"datos que quiero guardar=>\", classroom)\n  }\n\n\n  handleClose = () => {\n    this.setState({ show: false });\n  }\n\n  handleShow = () => {\n    this.setState({ show: true });\n  }\n\n\n  render() {\n    const { errors, students, user, touch } = this.state\n    \n    return(\n      <>\n        <Button variant=\"outline-info ml-3\" onClick={this.handleShow}>\n          +\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Add News Students</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <InputGroup className=\"mb-3\">\n              <Form.Control\n                className={`form-control ${touch.email && errors.email && 'is-invalid'}`}\n                placeholder=\"Student email...\"\n                name=\"email\" \n                value={user.email}\n                isInvalid={this.handleBlur}\n                onChange={this.handleChange}\n              />\n              \n              <Form.Control.Feedback type=\"invalid\">\n                {errors.email}\n              </Form.Control.Feedback>\n              <InputGroup.Append>\n                <Button variant=\"outline-secondary\" onClick={this.getStudent}>+ Add</Button>\n              </InputGroup.Append>\n            </InputGroup>\n            <ol reversed>\n              {students.map(student => (\n                <li key={student.id}>{student.name} {student.surname} - {student.email}</li>\n              ))}\n              \n            </ol>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"info\" onClick={this.addListStudents}>\n              Save students\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    )\n  }\n}\n\nexport default withAuthConsumer(AddStudent);"]},"metadata":{},"sourceType":"module"}