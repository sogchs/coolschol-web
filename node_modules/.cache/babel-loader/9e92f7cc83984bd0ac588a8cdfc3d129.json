{"ast":null,"code":"import _toConsumableArray from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/AddStudent.js\";\nimport React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport classroomService from '../../services/classroom-service';\nimport { Button, Modal, FormControl, InputGroup, Form } from 'react-bootstrap'; // eslint-disable-next-line no-useless-escape\n\nvar EMAIL_PATTERN = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nvar validations = {\n  email: function email(value) {\n    var message;\n\n    if (!value) {\n      message = 'Email is required';\n    } else if (!EMAIL_PATTERN.test(value)) {\n      message = 'Invalid email pattern';\n    }\n\n    return message;\n  }\n};\n\nvar AddStudent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddStudent, _Component);\n\n  function AddStudent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddStudent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddStudent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      students: [],\n      objectIdStudents: [],\n      user: {\n        email: ''\n      },\n      errors: {\n        email: validations.email()\n      },\n      touch: {}\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState({\n        user: _defineProperty({}, name, value),\n        errors: _objectSpread({}, _this.state.errors, _defineProperty({}, name, validations[name] && validations[name](value)))\n      });\n    };\n\n    _this.handleBLur = function (event) {\n      var name = event.target.name;\n\n      _this.setState(_objectSpread({}, _this.state.touch, _defineProperty({}, name, true)));\n    };\n\n    _this.getStudent = function (event) {\n      event.preventDefault();\n\n      var userEmail = _objectSpread({}, _this.state.user);\n\n      classroomService.searchUserByEmail(userEmail).then(function (student) {\n        return _this.setState({\n          students: [].concat(_toConsumableArray(_this.state.students), [student]),\n          objectIdStudents: [].concat(_toConsumableArray(_this.state.objectIdStudents), [student.id]),\n          user: {\n            email: ''\n          }\n        });\n      });\n    };\n\n    _this.addListStudents = function (event) {\n      event.preventDefault();\n      var classroom = {\n        students: _this.state.students.map(function (student) {\n          return student.id;\n        })\n      };\n      classroomService.editClassroom(_this.props.classroom.id, classroom) //.then(this.props.fetchClassrooms)\n      .then(_this.setState({\n        show: false\n      }));\n      console.log(\"id clase en la que estoy=>\", _this.props.classroom.id);\n      console.log(\"datos que quiero guardar=>\", classroom);\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AddStudent, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          students = _this$state.students,\n          user = _this$state.user;\n      return React.createElement(React.Fragment, null, React.createElement(Button, {\n        variant: \"outline-info ml-3\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"+\"), React.createElement(Modal, {\n        show: this.state.show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Add News Students\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        className: \"mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        placeholder: \"Student email...\",\n        name: \"email\",\n        value: user.email,\n        onBlur: this.handleBlur,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(Form.Control.Feedback, {\n        type: \"invalid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, errors.email), React.createElement(InputGroup.Append, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-secondary\",\n        onClick: this.getStudent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"+ Add\"))), React.createElement(\"ol\", {\n        reversed: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, students.map(function (student) {\n        return React.createElement(\"li\", {\n          key: student.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, student.name, \" \", student.surname, \" - \", student.email);\n      }))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        onClick: this.addListStudents,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Save students\"))));\n    }\n  }]);\n\n  return AddStudent;\n}(Component);\n\nexport default withAuthConsumer(AddStudent);","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/classroom/AddStudent.js"],"names":["React","Component","withAuthConsumer","classroomService","Button","Modal","FormControl","InputGroup","Form","EMAIL_PATTERN","validations","email","value","message","test","AddStudent","state","students","objectIdStudents","user","errors","touch","handleChange","event","target","name","setState","handleBLur","getStudent","preventDefault","userEmail","searchUserByEmail","then","student","id","addListStudents","classroom","map","editClassroom","props","show","console","log","handleClose","handleShow","handleBlur","surname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport classroomService from '../../services/classroom-service';\nimport { Button, Modal, FormControl, InputGroup, Form } from 'react-bootstrap';\n\n// eslint-disable-next-line no-useless-escape\nconst EMAIL_PATTERN = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nconst validations = { \n  email: (value) => {\n  let message;\n  if(!value){\n    message = 'Email is required'\n  } \n  else if(!EMAIL_PATTERN.test(value)){\n    message = 'Invalid email pattern'\n  }\n  return message;\n}}\n\nclass AddStudent extends Component {\n  state = {\n    students: [],\n    objectIdStudents: [],\n    user: {\n      email:''\n    },\n    errors: {\n      email: validations.email(),\n    },\n    touch: {}\n  }\n\n  handleChange = (event) => {\n\n    const { name, value } = event.target;\n\n    this.setState({ \n      user: {\n        [name]: value\n      },\n      errors: {\n        ...this.state.errors,\n        [name]: validations[name] && validations[name](value)\n      }\n    })\n  }\n\n  handleBLur = (event) => {\n    const { name } = event.target;\n  \n    this.setState({\n      ...this.state.touch,\n      [name]: true\n    })\n  }\n\n  getStudent = (event) => {\n    event.preventDefault();\n\n    const userEmail = { ...this.state.user}\n    classroomService.searchUserByEmail(userEmail)\n    .then(student => this.setState({ \n      students: [\n        ...this.state.students,\n      student\n      ],\n      objectIdStudents: [\n        ...this.state.objectIdStudents,\n        student.id\n      ],\n      user: {\n        email: ''\n      }\n       \n    }))\n  }\n\n  addListStudents = (event) => {\n    event.preventDefault();\n\n    const classroom = {\n      students: this.state.students.map(student => student.id)\n    }\n    classroomService.editClassroom(this.props.classroom.id, classroom)\n      //.then(this.props.fetchClassrooms)\n      .then(this.setState({ show: false }))\n    console.log(\"id clase en la que estoy=>\", this.props.classroom.id)\n    console.log(\"datos que quiero guardar=>\", classroom)\n  }\n\n\n  handleClose = () => {\n    this.setState({ show: false });\n  }\n\n  handleShow = () => {\n    this.setState({ show: true });\n  }\n\n\n  render() {\n    const { errors, students, user } = this.state\n    \n    return(\n      <>\n        <Button variant=\"outline-info ml-3\" onClick={this.handleShow}>\n          +\n        </Button>\n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Add News Students</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <InputGroup className=\"mb-3\">\n              <Form.Control\n                placeholder=\"Student email...\"\n                name=\"email\" \n                value={user.email}\n                onBlur={this.handleBlur}\n                onChange={this.handleChange}\n              />\n              \n              <Form.Control.Feedback type=\"invalid\">\n                {errors.email}\n              </Form.Control.Feedback>\n              <InputGroup.Append>\n                <Button variant=\"outline-secondary\" onClick={this.getStudent}>+ Add</Button>\n              </InputGroup.Append>\n            </InputGroup>\n            <ol reversed>\n              {students.map(student => (\n                <li key={student.id}>{student.name} {student.surname} - {student.email}</li>\n              ))}\n              \n            </ol>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"info\" onClick={this.addListStudents}>\n              Save students\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    )\n  }\n}\n\nexport default withAuthConsumer(AddStudent);"]},"metadata":{},"sourceType":"module"}