{"ast":null,"code":"import _objectSpread from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/contexts/AuthStore.js\";\nimport React, { Component } from 'react';\nvar CURRENT_USER_KEY = 'current-user';\nvar CURRENT_CLASSROOM_KEY = 'current-classroom';\nvar AuthContext = React.createContext();\n\nvar AuthStore =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AuthStore, _Component);\n\n  function AuthStore() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AuthStore);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuthStore)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: JSON.parse(localStorage.getItem(CURRENT_USER_KEY) || '{}'),\n      classroom: JSON.parse(localStorage.getItem(CURRENT_CLASSROOM_KEY) || '{}')\n    };\n\n    _this.handleUserChange = function (user) {\n      _this.setState(_objectSpread({}, _this.state, {\n        user: user\n      }));\n\n      if (user && user.email) {\n        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));\n      } else {\n        localStorage.removeItem(CURRENT_USER_KEY);\n      }\n    };\n\n    _this.handleClassroomChange = function (classroom) {\n      console.log(classroom);\n\n      _this.setState(_objectSpread({}, _this.state, {\n        classroom: classroom\n      }));\n\n      if (classroom && classroom.id) {\n        localStorage.setItem(CURRENT_CLASSROOM_KEY, JSON.stringify(classroom));\n      } else {\n        localStorage.removeItem(CURRENT_CLASSROOM_KEY);\n      }\n    };\n\n    _this.isAuthenticated = function () {\n      return _this.state.user && _this.state.user.email;\n    };\n\n    _this.isAdmin = function () {\n      return _this.state.user && _this.state.user.role === 'teacher';\n    };\n\n    return _this;\n  }\n\n  _createClass(AuthStore, [{\n    key: \"render\",\n    //cambiar por teacher\n    value: function render() {\n      return React.createElement(AuthContext.Provider, {\n        value: {\n          user: this.state.user,\n          classroom: this.state.classroom,\n          onUserChanged: this.handleUserChange,\n          isAuthenticated: this.isAuthenticated,\n          isAdmin: this.isAdmin,\n          onClassroomChanged: this.handleClassroomChange\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AuthStore;\n}(Component);\n\nvar withAuthConsumer = function withAuthConsumer(Component) {\n  return function (props) {\n    return React.createElement(AuthContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, function (storeProps) {\n      return React.createElement(Component, Object.assign({}, props, storeProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }));\n    });\n  };\n};\n\nexport { withAuthConsumer, AuthStore, AuthContext };","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/contexts/AuthStore.js"],"names":["React","Component","CURRENT_USER_KEY","CURRENT_CLASSROOM_KEY","AuthContext","createContext","AuthStore","state","user","JSON","parse","localStorage","getItem","classroom","handleUserChange","setState","email","setItem","stringify","removeItem","handleClassroomChange","console","log","id","isAuthenticated","isAdmin","role","onUserChanged","onClassroomChanged","props","children","withAuthConsumer","storeProps"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,IAAMC,gBAAgB,GAAG,cAAzB;AACA,IAAMC,qBAAqB,GAAG,mBAA9B;AACA,IAAMC,WAAW,GAAGJ,KAAK,CAACK,aAAN,EAApB;;IAEMC,S;;;;;;;;;;;;;;;;;UAEJC,K,GAAQ;AACNC,MAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBV,gBAArB,KAA0C,IAArD,CADA;AAENW,MAAAA,SAAS,EAAEJ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBT,qBAArB,KAA+C,IAA1D;AAFL,K;;UAKRW,gB,GAAmB,UAACN,IAAD,EAAU;AAC3B,YAAKO,QAAL,mBACK,MAAKR,KADV;AAEEC,QAAAA,IAAI,EAAEA;AAFR;;AAKA,UAAGA,IAAI,IAAIA,IAAI,CAACQ,KAAhB,EAAsB;AACpBL,QAAAA,YAAY,CAACM,OAAb,CAAqBf,gBAArB,EAAuCO,IAAI,CAACS,SAAL,CAAeV,IAAf,CAAvC;AACD,OAFD,MAEO;AACLG,QAAAA,YAAY,CAACQ,UAAb,CAAwBjB,gBAAxB;AACD;AACF,K;;UAEDkB,qB,GAAwB,UAACP,SAAD,EAAe;AACrCQ,MAAAA,OAAO,CAACC,GAAR,CAAYT,SAAZ;;AACA,YAAKE,QAAL,mBACK,MAAKR,KADV;AAEEM,QAAAA,SAAS,EAAEA;AAFb;;AAIE,UAAGA,SAAS,IAAIA,SAAS,CAACU,EAA1B,EAA6B;AAC3BZ,QAAAA,YAAY,CAACM,OAAb,CAAqBd,qBAArB,EAA4CM,IAAI,CAACS,SAAL,CAAeL,SAAf,CAA5C;AACD,OAFD,MAEO;AACLF,QAAAA,YAAY,CAACQ,UAAb,CAAwBhB,qBAAxB;AACD;AACJ,K;;UAEDqB,e,GAAkB;AAAA,aAAM,MAAKjB,KAAL,CAAWC,IAAX,IAAmB,MAAKD,KAAL,CAAWC,IAAX,CAAgBQ,KAAzC;AAAA,K;;UAClBS,O,GAAU;AAAA,aAAM,MAAKlB,KAAL,CAAWC,IAAX,IAAmB,MAAKD,KAAL,CAAWC,IAAX,CAAgBkB,IAAhB,KAAyB,SAAlD;AAAA,K;;;;;;;AAA6D;6BAE/D;AACN,aACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,QAAA,KAAK,EAAG;AAC5BlB,UAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IADW;AAE5BK,UAAAA,SAAS,EAAE,KAAKN,KAAL,CAAWM,SAFM;AAG5Bc,UAAAA,aAAa,EAAE,KAAKb,gBAHQ;AAI5BU,UAAAA,eAAe,EAAE,KAAKA,eAJM;AAK5BC,UAAAA,OAAO,EAAE,KAAKA,OALc;AAM5BG,UAAAA,kBAAkB,EAAE,KAAKR;AANG,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAQG,KAAKS,KAAL,CAAWC,QARd,CADF;AAYD;;;;EAjDqB7B,S;;AAqDxB,IAAM8B,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC9B,SAAD,EAAe;AACtC,SAAM,UAAC4B,KAAD;AAAA,WACJ,oBAAC,WAAD,CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,UAACG,UAAD;AAAA,aAAgB,oBAAC,SAAD,oBAAeH,KAAf,EAA0BG,UAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAhB;AAAA,KADH,CADI;AAAA,GAAN;AAKD,CAND;;AAQA,SAASD,gBAAT,EAA2BzB,SAA3B,EAAsCF,WAAtC","sourcesContent":["import React, { Component } from 'react';\n\nconst CURRENT_USER_KEY = 'current-user';\nconst CURRENT_CLASSROOM_KEY = 'current-classroom';\nconst AuthContext = React.createContext();\n\nclass AuthStore extends Component {\n\n  state = {\n    user: JSON.parse(localStorage.getItem(CURRENT_USER_KEY) || '{}'),\n    classroom: JSON.parse(localStorage.getItem(CURRENT_CLASSROOM_KEY) || '{}')\n  }\n\n  handleUserChange = (user) => {\n    this.setState({\n      ...this.state,\n      user: user\n    });\n\n    if(user && user.email){\n      localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user))\n    } else {\n      localStorage.removeItem(CURRENT_USER_KEY)\n    }\n  }\n\n  handleClassroomChange = (classroom) => {\n    console.log(classroom);\n    this.setState({ \n      ...this.state,\n      classroom: classroom });\n    \n      if(classroom && classroom.id){\n        localStorage.setItem(CURRENT_CLASSROOM_KEY, JSON.stringify(classroom))\n      } else {\n        localStorage.removeItem(CURRENT_CLASSROOM_KEY)\n      }\n  }\n\n  isAuthenticated = () => this.state.user && this.state.user.email;\n  isAdmin = () => this.state.user && this.state.user.role === 'teacher'; //cambiar por teacher\n\n  render(){\n    return(\n      <AuthContext.Provider value= {{\n        user: this.state.user,\n        classroom: this.state.classroom,\n        onUserChanged: this.handleUserChange,\n        isAuthenticated: this.isAuthenticated,\n        isAdmin: this.isAdmin,\n        onClassroomChanged: this.handleClassroomChange\n      }}>\n        {this.props.children}\n      </AuthContext.Provider>\n    )\n  }\n}\n\n\nconst withAuthConsumer = (Component) => {\n  return(props) => (\n    <AuthContext.Consumer>\n      {(storeProps) => <Component {...props} {...storeProps}/>}\n    </AuthContext.Consumer>\n  )\n}\n\nexport { withAuthConsumer, AuthStore, AuthContext}"]},"metadata":{},"sourceType":"module"}