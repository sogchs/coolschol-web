{"ast":null,"code":"import _defineProperty from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/board/CreateCard.js\";\nimport React, { Component } from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport { Modal, Button, Collapse, ButtonGroup } from 'react-bootstrap';\nimport boardService from '../../services/board-service';\nimport calendarService from '../../services/board-service';\nvar validations = {\n  title: function title(value) {\n    var message;\n\n    if (!value) {\n      message = 'Title is required';\n    }\n\n    return message;\n  },\n  description: function description(value) {\n    var message;\n\n    if (!value) {\n      message = 'Description is required';\n    }\n\n    return message;\n  }\n};\n\nvar CreateCard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateCard, _Component);\n\n  function CreateCard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateCard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateCard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      card: {\n        title: '',\n        description: '',\n        column: _this.props.columnId,\n        attachFiles: [],\n        filePreview: '',\n        dateStart: '',\n        dateFinish: '',\n        accountPay: '',\n        amountPay: '',\n        conceptPay: ''\n      },\n      errors: {\n        title: validations.title(),\n        description: validations.description()\n      },\n      touch: {},\n      show: false,\n      date: false,\n      pay: false,\n      attach: false,\n      addEvent: false\n    };\n\n    _this.handleChange = function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value,\n          files = _e$target.files; //const isValid = validations[name] === undefined || validations[name](value);\n\n      _this.setState({\n        card: _objectSpread({}, _this.state.card, _defineProperty({}, name, files && files[0] ? [].concat(_toConsumableArray(_this.state.card.attachFiles), [files[0]]) : value)),\n        errors: _objectSpread({}, _this.state.errors, _defineProperty({}, name, validations[name] && validations[name](value)))\n      });\n    };\n\n    _this.handleBlur = function (e) {\n      _this.setState({\n        touch: _objectSpread({}, _this.state.touch, _defineProperty({}, e.target.name, true))\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      if (_this.state.addEvent) {\n        var eventData = {\n          title: _this.state.card.title,\n          classroom: _this.props.classroom.id,\n          start: _this.state.card.dateStart,\n          end: _this.state.card.dateFinish,\n          role: 'classroom',\n          color: \"rgb(30, 163, 183)\"\n        };\n        calendarService.createEvent(eventData);\n      }\n\n      var cardData = _objectSpread({}, _this.state.card);\n\n      boardService.createCard(cardData).then(_this.handleClose()).then(_this.props.fetchColumns);\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CreateCard, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isError = Object.values(this.state.errors).some(function (error) {\n        return error;\n      });\n      var _this$state = this.state,\n          card = _this$state.card,\n          errors = _this$state.errors,\n          touch = _this$state.touch,\n          show = _this$state.show,\n          date = _this$state.date,\n          pay = _this$state.pay,\n          attach = _this$state.attach,\n          addEvent = _this$state.addEvent;\n      return React.createElement(React.Fragment, null, \" \", this.props.user.role === \"teacher\" && React.createElement(Button, {\n        variant: \"outline-info\",\n        className: \"fas fa-plus m-2 rounded-pill\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(Modal, {\n        show: show,\n        onHide: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Modal.Title, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Create a new card\")), React.createElement(Modal.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"titleCard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control \".concat(touch.title && errors.title && 'is-invalid'),\n        id: \"titleCard\",\n        value: card.title,\n        onChange: this.handleChange,\n        onBlur: this.handleBlur,\n        name: \"title\",\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"invalid-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, errors.title)), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"descriptionCard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"textarea\", {\n        type: \"text\",\n        className: \"form-control \".concat(touch.description && errors.description && 'is-invalid'),\n        id: \"descriptionCard\",\n        value: card.description,\n        onChange: this.handleChange,\n        onBlur: this.handleBlur,\n        name: \"description\",\n        autoComplete: \"off\",\n        rows: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"invalid-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, errors.description)), React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: function onClick() {\n          return _this2.setState({\n            attach: !attach,\n            pay: false,\n            date: false\n          });\n        },\n        \"aria-controls\": \"collapse-date\",\n        \"aria-expanded\": attach,\n        variant: \"outline-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Attach\"), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this2.setState({\n            date: !date,\n            pay: false,\n            attach: false\n          });\n        },\n        \"aria-controls\": \"collapse-date\",\n        \"aria-expanded\": date,\n        variant: \"outline-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Date\"), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this2.setState({\n            pay: !pay,\n            date: false,\n            attach: false\n          });\n        },\n        \"aria-controls\": \"collapse-pay\",\n        \"aria-expanded\": pay,\n        variant: \"outline-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"Pay\")), React.createElement(Collapse, {\n        in: this.state.attach,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"collapse-attach\",\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, this.state.card.attachFiles.map(function (img, i) {\n        return React.createElement(\"img\", {\n          key: i,\n          className: \"img-upload\",\n          src: URL.createObjectURL(img),\n          alt: \"...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        });\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"add-img btn btn-outline-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        className: \"custom-file-input\",\n        name: \"attachFiles\",\n        id: \"attachFiles\",\n        onChange: this.handleChange,\n        onBlur: this.handleBlur,\n        lang: \"es\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"abc fas fa-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })))), React.createElement(Collapse, {\n        in: this.state.date,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"collapse-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Select one date\"), React.createElement(\"div\", {\n        className: \"date-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"\",\n        type: \"date\",\n        name: \"dateStart\",\n        value: card.dateStart,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"dateStart\",\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Start\")), React.createElement(\"div\", {\n        className: \"mt-3 date-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"\",\n        type: \"date\",\n        name: \"dateFinish\",\n        value: card.dateFinish,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"dateFinish\",\n        className: \"ml-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Finish\")), React.createElement(\"div\", {\n        className: \"custom-control custom-switch mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        className: \"custom-control-input\",\n        id: \"customSwitch1\",\n        name: \"addEvent\",\n        value: addEvent,\n        onChange: function onChange() {\n          return _this2.setState({\n            addEvent: !addEvent\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"custom-control-label\",\n        htmlFor: \"customSwitch1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Include this event in a calendar\"))))), React.createElement(Collapse, {\n        in: this.state.pay,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"collapse-pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"m-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"accountPay\",\n        className: \"col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"Account number\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"accountPay\",\n        name: \"accountPay\",\n        value: card.accountPay,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"conceptPay\",\n        className: \"col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Concept\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"conceptPay\",\n        name: \"conceptPay\",\n        value: card.conceptPay,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"amountPay\",\n        className: \"col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Amount\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control w-50\",\n        id: \"amountPay\",\n        name: \"amountPay\",\n        value: card.amountPay,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      })))))), React.createElement(Modal.Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, \"Create\"))));\n    }\n  }]);\n\n  return CreateCard;\n}(Component);\n\nexport default withAuthConsumer(CreateCard);","map":{"version":3,"sources":["/Users/sergioortega/Desktop/coolSchool/web-coolSchool/src/components/board/CreateCard.js"],"names":["React","Component","withAuthConsumer","Modal","Button","Collapse","ButtonGroup","boardService","calendarService","validations","title","value","message","description","CreateCard","state","card","column","props","columnId","attachFiles","filePreview","dateStart","dateFinish","accountPay","amountPay","conceptPay","errors","touch","show","date","pay","attach","addEvent","handleChange","e","target","name","files","setState","handleBlur","handleSubmit","preventDefault","eventData","classroom","id","start","end","role","color","createEvent","cardData","createCard","then","handleClose","fetchColumns","handleShow","isError","Object","values","some","error","user","map","img","i","URL","createObjectURL"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { withAuthConsumer } from '../../contexts/AuthStore';\nimport { Modal, Button, Collapse, ButtonGroup } from 'react-bootstrap';\nimport boardService from '../../services/board-service';\nimport calendarService from '../../services/board-service';\n\n\nconst validations = {\n    title:(value) => {\n      let message;\n      if(!value){\n        message = 'Title is required'\n      }\n      return message;\n    },\n    description:(value) => {\n      let message;\n      if(!value){\n        message = 'Description is required'\n      }\n      return message;\n    }\n  }\nclass CreateCard extends Component {\n\n    state = {\n        card: {\n          title: '',\n          description: '',\n          column: this.props.columnId,\n          attachFiles: [],\n          filePreview:'',\n          dateStart:'',\n          dateFinish:'',\n          accountPay:'',\n          amountPay:'',\n          conceptPay:''\n        },\n        errors: {\n          title: validations.title(),\n          description: validations.description()\n        },\n        touch: {},\n        show: false,\n        date: false,\n        pay: false,\n        attach: false,\n        addEvent: false\n      }\n\n      handleChange = (e) => {\n        const { name, value, files } = e.target;\n    \n        //const isValid = validations[name] === undefined || validations[name](value);\n    \n        this.setState({ \n          card: {\n            ...this.state.card,\n            [name]: (files && files[0]) ? [...this.state.card.attachFiles, files[0]] : value\n          },\n          errors: {\n            ...this.state.errors,\n            [name]: validations[name] && validations[name](value)\n          } \n          \n        })\n      }\n\n      handleBlur = (e) => {\n        this.setState({\n          touch: {\n            ...this.state.touch,\n            [e.target.name]: true\n          }\n        })\n      }\n    \n\n\n    handleSubmit = (e) => {\n      e.preventDefault();\n\n      if(this.state.addEvent){\n        const eventData = {\n          title: this.state.card.title,\n          classroom: this.props.classroom.id,\n          start: this.state.card.dateStart,\n          end: this.state.card.dateFinish,\n          role: 'classroom',\n          color: \"rgb(30, 163, 183)\"\n        }\n        calendarService.createEvent(eventData)\n      }\n  \n      const cardData = {\n        ...this.state.card\n      }\n  \n      boardService.createCard(cardData)\n        .then(this.handleClose())\n        .then(this.props.fetchColumns)\n    }\n\n    handleClose = () => {this.setState({ show: false });}\n\n    handleShow = () => {this.setState({ show: true });}\n\nrender(){\n  \n    const isError = Object.values(this.state.errors).some(error => error);\n    const { card, errors, touch, show, date, pay, attach, addEvent } = this.state;\n\n    return (\n      <> {this.props.user.role === \"teacher\" &&\n        <Button variant=\"outline-info\" className=\"fas fa-plus m-2 rounded-pill\" onClick={this.handleShow}></Button>\n        }\n        <Modal show={show} onHide={this.handleClose}>\n          <Modal.Header closeButton>\n            <Modal.Title>Create a new card</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <form>\n              <div className=\"form-group\">\n                <label htmlFor=\"titleCard\">Title</label>\n                <input type=\"text\" \n                  className={`form-control ${touch.title && errors.title && 'is-invalid'}`} \n                  id=\"titleCard\" \n                  value={card.title} \n                  onChange={this.handleChange}\n                  onBlur={this.handleBlur}\n                  name=\"title\"\n                  autoComplete=\"off\"\n                  />\n                  <div className=\"invalid-feedback\">{errors.title}</div>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"descriptionCard\">Description</label>\n                <textarea type=\"text\" \n                  className={`form-control ${touch.description && errors.description && 'is-invalid'}`} \n                  id=\"descriptionCard\" \n                  value={card.description} \n                  onChange={this.handleChange}\n                  onBlur={this.handleBlur}\n                  name=\"description\"\n                  autoComplete=\"off\"\n                  rows=\"3\"\n                  />\n                  <div className=\"invalid-feedback\">{errors.description}</div>\n              </div>\n\n              <ButtonGroup >\n                  <Button\n                    onClick={() => this.setState({ attach: !attach, pay: false, date: false })}\n                    aria-controls=\"collapse-date\"\n                    aria-expanded={attach}\n                    variant=\"outline-secondary\"\n                  >\n                    Attach\n                  </Button>\n                  <Button\n                    onClick={() => this.setState({ date: !date, pay: false, attach: false })}\n                    aria-controls=\"collapse-date\"\n                    aria-expanded={date}\n                    variant=\"outline-secondary\"\n                  >\n                    Date\n                  </Button>\n                  <Button\n                    onClick={() => this.setState({ pay: !pay, date: false, attach: false })}\n                    aria-controls=\"collapse-pay\"\n                    aria-expanded={pay}\n                    variant=\"outline-secondary\"\n                  >\n                    Pay\n                  </Button>\n                </ButtonGroup>\n                <Collapse in={this.state.attach}>\n                  <div id=\"collapse-attach\" className=\"mt-3\">\n\n                  {this.state.card.attachFiles.map((img, i) => (\n                    <img key={i} className=\"img-upload\" src={URL.createObjectURL(img)} alt=\"...\"/>\n                  ))}\n\n                  <button type=\"button\" className=\"add-img btn btn-outline-info\">\n                    <input \n                        type=\"file\" \n                        className=\"custom-file-input\" \n                        name=\"attachFiles\" id=\"attachFiles\" \n                        onChange={this.handleChange}\n                        onBlur={this.handleBlur}\n                        lang=\"es\"/> \n                        <i className=\"abc fas fa-image\"></i>\n                  </button>\n                  </div>\n                </Collapse>\n                <Collapse in={this.state.date}>\n                  <div id=\"collapse-date\">\n                  <div className=\"mt-2\">\n                      <p className=\"mt-3\">Select one date</p>\n                      <div className=\"date-card\">\n                        <input className=\"\" type=\"date\" \n                        name=\"dateStart\" \n                        value={card.dateStart}\n                        onChange={this.handleChange}\n                        />\n                        <label htmlFor=\"dateStart\" className=\"ml-2\">Start</label>\n                      </div>\n                      <div className=\"mt-3 date-card\">\n                        <input className=\"\" type=\"date\" \n                        name=\"dateFinish\" \n                        value={card.dateFinish}\n                        onChange={this.handleChange}\n                        />\n                        <label htmlFor=\"dateFinish\" className=\"ml-2\">Finish</label>\n                      </div>\n                      \n                      <div className=\"custom-control custom-switch mt-2\">\n                        <input type=\"checkbox\" \n                          className=\"custom-control-input\" \n                          id=\"customSwitch1\"\n                          name=\"addEvent\" \n                          value={addEvent}\n                          onChange={() => this.setState({ addEvent : !addEvent})}\n                          />\n                        <label className=\"custom-control-label\" htmlFor=\"customSwitch1\">Include this event in a calendar</label>\n                      </div>\n                    </div>\n                  </div>\n                </Collapse>\n                <Collapse in={this.state.pay}>\n                  <div id=\"collapse-pay\">\n                  <div className=\"m-2\">\n                      <label htmlFor=\"accountPay\" className=\"col-form-label\">Account number</label>\n                      <input type=\"text\" className=\"form-control\" \n                      id=\"accountPay\"\n                      name=\"accountPay\"\n                      value={card.accountPay}\n                      onChange={this.handleChange}\n                      />\n                      <label htmlFor=\"conceptPay\" className=\"col-form-label\">Concept</label>\n                      <input type=\"text\" className=\"form-control\" \n                      id=\"conceptPay\"\n                      name=\"conceptPay\"\n                      value={card.conceptPay}\n                      onChange={this.handleChange}\n                      />\n                      <label htmlFor=\"amountPay\" className=\"col-form-label\">Amount</label>\n                      <input type=\"text\" className=\"form-control w-50\" \n                      id=\"amountPay\"\n                      name=\"amountPay\"\n                      value={card.amountPay}\n                      onChange={this.handleChange}\n                      />\n                    </div>\n                  </div>\n                </Collapse>\n              \n            </form>\n          </Modal.Body>\n            <Modal.Footer>\n              <Button variant=\"info\" onClick={this.handleSubmit}>Create</Button>\n            </Modal.Footer>\n        </Modal>\n      </>\n\n    )\n}}\n\n\nexport default withAuthConsumer(CreateCard) ;\n\n\n"]},"metadata":{},"sourceType":"module"}